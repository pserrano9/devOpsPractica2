---
- name: 'aks'
  hosts: webservers
  remote_user: adminUsername
  become: true
  vars_files:
    - vars/02_vars.yaml
    
  tasks:
    - name: install pre-requisites
      pip:
      name:
        - openshift
        - pyyaml
        - kubernetes 
        
    - name: 'Definir los objectos deployment y servicios'
      ansible.builtin.template:
        src: templates/stateless.j2
        dest: "{{ directorio_trabajo }}/{{ aplicacion.definicion }}"
        
    - name: 'Crear namespace'
      k8s:
        kind: Namespace
        name: "{{ k8s_namespace}}"
       
  #  - name: 'TEST'
    #   kubernetes.core.k8s:
   #      kind: Namespace
   #      name: "{{ k8s_namespace }}"
 #
  #   - name: 'Crear Deployments y servicios de la aplicaci√≥n'
    #   kubernetes.core.k8s:
    #     state: present
    #     template: "{{ directorio_trabajo }}/{{ aplicacion.definicion }}"
